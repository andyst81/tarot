{"ast":null,"code":"import allcards from '../../tarot.json';\nexport default ((req, res) => {\n  const {\n    name\n  } = req.query;\n  let cards = allcards;\n\n  if (name) {\n    cards = cards.filter(quote => quote.name.toLowerCase().includes(name.toLowerCase()));\n  }\n\n  if (!cards.length) {\n    cards = allcards.filter(quote => quote.name.toLowerCase() === 'unknown');\n  }\n\n  const quote = cards[Math.floor(Math.random() * cards.length)];\n  res.status(200).json(quote);\n});","map":{"version":3,"sources":["/home/andy/Sites/tarot/pages/api/randomCard.js"],"names":["allcards","req","res","name","query","cards","filter","quote","toLowerCase","includes","length","Math","floor","random","status","json"],"mappings":"AAAA,OAAOA,QAAP,MAAqB,kBAArB;AAEA,gBAAe,CAACC,GAAD,EAAMC,GAAN,KAAc;AAC3B,QAAM;AAAEC,IAAAA;AAAF,MAAWF,GAAG,CAACG,KAArB;AACA,MAAIC,KAAK,GAAGL,QAAZ;;AAEA,MAAIG,IAAJ,EAAU;AACRE,IAAAA,KAAK,GAAGA,KAAK,CAACC,MAAN,CAAaC,KAAK,IAAIA,KAAK,CAACJ,IAAN,CAAWK,WAAX,GAAyBC,QAAzB,CAAkCN,IAAI,CAACK,WAAL,EAAlC,CAAtB,CAAR;AACD;;AACD,MAAI,CAACH,KAAK,CAACK,MAAX,EAAmB;AACjBL,IAAAA,KAAK,GAAGL,QAAQ,CAACM,MAAT,CAAgBC,KAAK,IAAIA,KAAK,CAACJ,IAAN,CAAWK,WAAX,OAA6B,SAAtD,CAAR;AACD;;AAED,QAAMD,KAAK,GAAGF,KAAK,CAACM,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,MAAL,KAAgBR,KAAK,CAACK,MAAjC,CAAD,CAAnB;AAEAR,EAAAA,GAAG,CAACY,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqBR,KAArB;AACD,CAdD","sourcesContent":["import allcards from '../../tarot.json';\n\nexport default (req, res) => {\n  const { name } = req.query;\n  let cards = allcards;\n\n  if (name) {\n    cards = cards.filter(quote => quote.name.toLowerCase().includes(name.toLowerCase()));\n  }\n  if (!cards.length) {\n    cards = allcards.filter(quote => quote.name.toLowerCase() === 'unknown');\n  }\n\n  const quote = cards[Math.floor(Math.random() * cards.length)];\n\n  res.status(200).json(quote);\n};\n"]},"metadata":{},"sourceType":"module"}