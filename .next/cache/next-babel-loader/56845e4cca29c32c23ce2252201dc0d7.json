{"ast":null,"code":"import allQuotes from '../../tarot.json';\nexport default ((req, res) => {\n  const {\n    name\n  } = req.query;\n  let quotes = allQuotes;\n\n  if (name) {\n    quotes = quotes.filter(quote => quote.author.toLowerCase().includes(author.toLowerCase()));\n  }\n\n  if (!quotes.length) {\n    quotes = allQuotes.filter(quote => quote.author.toLowerCase() === 'unknown');\n  }\n\n  const quote = quotes[Math.floor(Math.random() * quotes.length)];\n  res.status(200).json(quote);\n});","map":{"version":3,"sources":["/home/andy/Sites/tarot/pages/api/randomCard.js"],"names":["allQuotes","req","res","name","query","quotes","filter","quote","author","toLowerCase","includes","length","Math","floor","random","status","json"],"mappings":"AAAA,OAAOA,SAAP,MAAsB,kBAAtB;AAEA,gBAAe,CAACC,GAAD,EAAMC,GAAN,KAAc;AAC3B,QAAM;AAAEC,IAAAA;AAAF,MAAWF,GAAG,CAACG,KAArB;AACA,MAAIC,MAAM,GAAGL,SAAb;;AAEA,MAAIG,IAAJ,EAAU;AACRE,IAAAA,MAAM,GAAGA,MAAM,CAACC,MAAP,CAAcC,KAAK,IAAIA,KAAK,CAACC,MAAN,CAAaC,WAAb,GAA2BC,QAA3B,CAAoCF,MAAM,CAACC,WAAP,EAApC,CAAvB,CAAT;AACD;;AACD,MAAI,CAACJ,MAAM,CAACM,MAAZ,EAAoB;AAClBN,IAAAA,MAAM,GAAGL,SAAS,CAACM,MAAV,CAAiBC,KAAK,IAAIA,KAAK,CAACC,MAAN,CAAaC,WAAb,OAA+B,SAAzD,CAAT;AACD;;AAED,QAAMF,KAAK,GAAGF,MAAM,CAACO,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,MAAL,KAAgBT,MAAM,CAACM,MAAlC,CAAD,CAApB;AAEAT,EAAAA,GAAG,CAACa,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqBT,KAArB;AACD,CAdD","sourcesContent":["import allQuotes from '../../tarot.json';\n\nexport default (req, res) => {\n  const { name } = req.query;\n  let quotes = allQuotes;\n\n  if (name) {\n    quotes = quotes.filter(quote => quote.author.toLowerCase().includes(author.toLowerCase()));\n  }\n  if (!quotes.length) {\n    quotes = allQuotes.filter(quote => quote.author.toLowerCase() === 'unknown');\n  }\n\n  const quote = quotes[Math.floor(Math.random() * quotes.length)];\n\n  res.status(200).json(quote);\n};\n"]},"metadata":{},"sourceType":"module"}